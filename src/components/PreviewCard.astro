---
import type { CollectionEntry } from 'astro:content';
import Icon from './Icon.astro';

interface Props {
  project: CollectionEntry<'work'>;
}

const { data, slug } = Astro.props.project;
---

<a
  class="mx-auto grid aspect-[1.2] max-w-md grid-cols-[auto_1fr] grid-rows-[auto_1fr] overflow-hidden rounded-xl border border-gray-300 text-gray-600 shadow-md shadow-gray-700/10 transition-shadow xjy-transition hocus:shadow-lg dark:border-gray-700 dark:text-gray-400 dark:shadow-gray-300/10 md:max-w-lg md:rounded-2xl [&_#description]:hocus:translate-y-0 [&_#title]:hocus:decoration-current"
  href={`/work/${slug}`}
>
  <div
    id="title"
    class="z-10 col-start-1 col-end-2 row-start-1 row-end-2 m-2 rounded-lg border border-gray-200 bg-gray-50 px-4 py-2 font-brand text-lg font-medium text-primary underline decoration-transparent decoration-1 underline-offset-[0.25em] transition-colors xjy-transition dark:border-gray-800 dark:bg-gray-950 md:rounded-xl"
  >
    {data.title}
  </div>
  <img
    class="col-start-1 col-end-3 row-start-1 row-end-3 w-full object-cover"
    src={data.img}
    alt={data.img_alt || ''}
    loading="lazy"
    decoding="async"
  />
  <div
    id="description"
    class="col-start-1 col-end-3 row-start-2 inline-grid min-h-0 translate-y-[calc(4*theme(spacing.10))] transition xjy-transition"
  >
    <div class="flex flex-col justify-end">
      {
        data.role && (
          <div class="z-10 mb-2 mr-2 self-end rounded-lg border border-gray-200 bg-gray-50 px-2 py-1 text-right text-sm dark:border-gray-800 dark:bg-gray-950 md:rounded-xl">
            {data.role}
            {data.timeText && (
              <span class="italic text-primary">
                <br />
                {data.timeText}
              </span>
            )}
          </div>
        )
      }
      <div
        class="flex h-[calc(4*theme(spacing.10))] flex-col justify-between border-t border-gray-300 bg-gray-50 p-2 dark:border-gray-700 dark:bg-gray-950"
      >
        <p class="line-clamp-4 max-h-[calc(4*theme(spacing.6))] leading-6">
          {data.description}
        </p>
        <div class="h-[1.5rem] pr-1 text-right font-bold text-primary">
          <span class="border-b border-b-current">
            Read More
            <Icon icon="arrow-right" />
          </span>
        </div>
      </div>
    </div>
  </div>
</a>

<style></style>
